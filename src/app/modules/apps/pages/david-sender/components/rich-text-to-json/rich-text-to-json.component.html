<div class="mt-10 flex flex-row w-full gap-3">

  <div class="flex w-full flex-col bg-white shadow-xl p-6  rounded-2xl max-w-3xl">
    <!-- Toolbar -->
    <div class="flex space-x-2 mb-4 border-b pb-2">
      <button (click)="format('bold')" class="px-3 py-1 text-sm font-semibold border rounded hover:bg-gray-100">
        <b>BOLD</b>
      </button>
      <button (click)="format('italic')" class="px-3 py-1 text-sm italic border rounded hover:bg-gray-100">
        ITALIC
      </button>
      <button (click)="format('code')" class="px-3 py-1 text-sm font-mono border rounded hover:bg-gray-100">
        CODE
      </button>
      <button (click)="format('tach')" class="px-3 py-1 text-sm font- border rounded hover:bg-gray-100">
        <del>TACH</del>
      </button>
    </div>

    <!-- Textarea -->
    <textarea id="editor" [(ngModel)]="text" (ngModelChange)="generateJson()"
      class="w-full h-full p-4 border border-gray-300 rounded resize-none focus:outline-none focus:ring focus:border-blue-300"
      placeholder="Escribe aquÃ­ tu mensaje..."></textarea>
  </div>


  <!-- Contenedor general simulando iPhone completo -->
  <div class="flex justify-center items-center h-fit bg-gray-300 rounded-full">
    <!-- Marco del iPhone -->
    <div class="relative w-[320px] h-[80dvh] bg-black rounded-[60px] shadow-2xl overflow-hidden flex flex-col">

      <!-- Botones laterales simulados -->
      <div class="absolute left-0 top-32 w-1.5 h-32 bg-gray-700 rounded-r-full"></div>
      <div class="absolute left-0 top-72 w-1.5 h-16 bg-gray-700 rounded-r-full"></div>
      <div class="absolute right-0 top-40 w-1.5 h-24 bg-gray-700 rounded-l-full"></div>



      <!-- Pantalla del iPhone (chat) -->
      <div class="flex-1 m-2  rounded-[52px] overflow-hidden">
        <!-- Barra superior estilo WhatsApp -->
        <div class="flex items-center justify-between bg-[#075E54] p-4 text-white ">
          <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-gray-700 font-bold">BA
            </div>
            <div class="flex flex-col">
              <span class="font-semibold">Bigso Agent</span>
              <span class="text-sm text-gray-200">En lÃ­nea</span>
            </div>
          </div>

        </div>
        <!-- Tu chat dentro -->
        <div class="flex flex-col w-full h-full max-h-[76dvh] bg-whatsapp">


          <!-- Contenedor de mensajes -->
          <div class="flex-1 overflow-y-auto p-4 pl-2 bg-whatsapp">
            <div class="flex flex-col space-y-3">
              <div class="flex space-x-1 items-start">


                <!-- Burbuja de mensaje -->
                <div
                  class="bg-white text-black rounded-t-xl rounded-br-xl p-4 shadow-md max-w-[75%] relative flex-shrink break-words pb-6">
                  <!-- Contenedor contraÃ­ble -->
                  <div
                    class="overflow-hidden flex flex-col space-y-1 transition-all duration-300">
                    <div *ngIf="renderedLines.length<=0" class="leading--[1.2] break-words">
                      . . .
                    </div>
                    <div *ngFor="let line of renderedLines" [innerHTML]="line" class="leading-[1.2] break-words text-xs">
                    </div>
                  </div>

                  <!-- BotÃ³n para expandir/contraer si hay mÃ¡s de 17 lÃ­neas -->
                  <!-- <button *ngIf="renderedLines.length > 17 && !expanded" class="text-xs text-blue-500 mt-2"
                    (click)="expanded = !expanded">
                    Leer mÃ¡s
                  </button> -->

                  <!-- Hora simulada -->
                  <span class="text-xs text-gray-500 absolute bottom-2 right-3 ">17:39</span>
                </div>
              </div>
            </div>
          </div>


        </div>
        <!-- Barra inferior simulando caja de texto -->
        <div class="flex items-center p-3 bg-white border-t border-gray-300">
          <button class="text-gray-500 mr-3">ðŸ“Ž</button>
          <input type="text" placeholder="Escribe un mensaje"
            class="flex-1 rounded-full border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500" />
          <button class="text-green-500 ml-3">âž¤</button>
        </div>

      </div>

    </div>
  </div>

  <!-- <textarea >{{jsonOutput | json}}</textarea> -->






</div>
